Job started on ac005 at Sun Jul 13 23:24:54 CDT 2025
--- Loading Data and Models ---
Preparing 100 evaluation queries...

==================== Experiment: Impact of Document Size ====================

--- Running for documents with average size: ~1500 tokens ---
  -> Screening for 100 docs with avg. byte size around 1500 bytes...
  -> Prepared 100 docs with actual avg. size: 1750.59 .
Preparing 10 evaluation queries...
  -> Evaluation data prepared.
  -> Starting server setup (K-means)...
  -> server setup finished in 0.05 seconds.
  -> Starting client setup (generating Paillier keys)...
  -> Client setup finished in 0.10 seconds.
  -> Starting query loop...
    [Query] Preparing PIR for cluster_idx: 7...
    [Query] Finish preparing PIR for cluster_idx: 7...
    [Query] Server start query for cluster_idx: 7...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 7...
    [Query] Total server query time for this query: 22.94 seconds.
    [Query] Preparing PIR for cluster_idx: 8...
    [Query] Finish preparing PIR for cluster_idx: 8...
    [Query] Server start query for cluster_idx: 8...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 8...
    [Query] Total server query time for this query: 22.88 seconds.
    [Query] Preparing PIR for cluster_idx: 6...
    [Query] Finish preparing PIR for cluster_idx: 6...
    [Query] Server start query for cluster_idx: 6...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 6...
    [Query] Total server query time for this query: 22.88 seconds.
    [Query] Preparing PIR for cluster_idx: 8...
    [Query] Finish preparing PIR for cluster_idx: 8...
    [Query] Server start query for cluster_idx: 8...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 8...
    [Query] Total server query time for this query: 22.88 seconds.
    [Query] Preparing PIR for cluster_idx: 6...
    [Query] Finish preparing PIR for cluster_idx: 6...
    [Query] Server start query for cluster_idx: 6...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 6...
    [Query] Total server query time for this query: 22.88 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 22.89 seconds.
    [Query] Preparing PIR for cluster_idx: 8...
    [Query] Finish preparing PIR for cluster_idx: 8...
    [Query] Server start query for cluster_idx: 8...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 8...
    [Query] Total server query time for this query: 22.88 seconds.
    [Query] Preparing PIR for cluster_idx: 9...
    [Query] Finish preparing PIR for cluster_idx: 9...
    [Query] Server start query for cluster_idx: 9...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 9...
    [Query] Total server query time for this query: 22.88 seconds.
    [Query] Preparing PIR for cluster_idx: 4...
    [Query] Finish preparing PIR for cluster_idx: 4...
    [Query] Server start query for cluster_idx: 4...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 4...
    [Query] Total server query time for this query: 22.87 seconds.
    [Query] Preparing PIR for cluster_idx: 2...
    [Query] Finish preparing PIR for cluster_idx: 2...
    [Query] Server start query for cluster_idx: 2...
    [Query] HE operations PIR ...
    [Query]  Max chunks 418...
    [Query] Server finish query for cluster_idx: 2...
    [Query] Total server query time for this query: 22.91 seconds.

--- Running for documents with average size: ~2500 tokens ---
  -> Screening for 100 docs with avg. byte size around 2500 bytes...
  -> Prepared 100 docs with actual avg. size: 2653.83 .
Preparing 10 evaluation queries...
  -> Evaluation data prepared.
  -> Starting server setup (K-means)...
  -> server setup finished in 0.01 seconds.
  -> Starting client setup (generating Paillier keys)...
  -> Client setup finished in 0.09 seconds.
  -> Starting query loop...
    [Query] Preparing PIR for cluster_idx: 9...
    [Query] Finish preparing PIR for cluster_idx: 9...
    [Query] Server start query for cluster_idx: 9...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 9...
    [Query] Total server query time for this query: 35.73 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 35.74 seconds.
    [Query] Preparing PIR for cluster_idx: 3...
    [Query] Finish preparing PIR for cluster_idx: 3...
    [Query] Server start query for cluster_idx: 3...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 3...
    [Query] Total server query time for this query: 35.73 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 35.76 seconds.
    [Query] Preparing PIR for cluster_idx: 0...
    [Query] Finish preparing PIR for cluster_idx: 0...
    [Query] Server start query for cluster_idx: 0...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 0...
    [Query] Total server query time for this query: 35.74 seconds.
    [Query] Preparing PIR for cluster_idx: 1...
    [Query] Finish preparing PIR for cluster_idx: 1...
    [Query] Server start query for cluster_idx: 1...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 1...
    [Query] Total server query time for this query: 35.74 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 35.86 seconds.
    [Query] Preparing PIR for cluster_idx: 6...
    [Query] Finish preparing PIR for cluster_idx: 6...
    [Query] Server start query for cluster_idx: 6...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 6...
    [Query] Total server query time for this query: 35.74 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 35.75 seconds.
    [Query] Preparing PIR for cluster_idx: 6...
    [Query] Finish preparing PIR for cluster_idx: 6...
    [Query] Server start query for cluster_idx: 6...
    [Query] HE operations PIR ...
    [Query]  Max chunks 741...
    [Query] Server finish query for cluster_idx: 6...
    [Query] Total server query time for this query: 35.75 seconds.

--- Running for documents with average size: ~3500 tokens ---
  -> Screening for 100 docs with avg. byte size around 3500 bytes...
  -> Prepared 100 docs with actual avg. size: 3566.92 .
Preparing 10 evaluation queries...
  -> Evaluation data prepared.
  -> Starting server setup (K-means)...
  -> server setup finished in 0.01 seconds.
  -> Starting client setup (generating Paillier keys)...
  -> Client setup finished in 0.09 seconds.
  -> Starting query loop...
    [Query] Preparing PIR for cluster_idx: 3...
    [Query] Finish preparing PIR for cluster_idx: 3...
    [Query] Server start query for cluster_idx: 3...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 3...
    [Query] Total server query time for this query: 50.98 seconds.
    [Query] Preparing PIR for cluster_idx: 3...
    [Query] Finish preparing PIR for cluster_idx: 3...
    [Query] Server start query for cluster_idx: 3...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 3...
    [Query] Total server query time for this query: 50.95 seconds.
    [Query] Preparing PIR for cluster_idx: 2...
    [Query] Finish preparing PIR for cluster_idx: 2...
    [Query] Server start query for cluster_idx: 2...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 2...
    [Query] Total server query time for this query: 50.97 seconds.
    [Query] Preparing PIR for cluster_idx: 4...
    [Query] Finish preparing PIR for cluster_idx: 4...
    [Query] Server start query for cluster_idx: 4...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 4...
    [Query] Total server query time for this query: 50.94 seconds.
    [Query] Preparing PIR for cluster_idx: 2...
    [Query] Finish preparing PIR for cluster_idx: 2...
    [Query] Server start query for cluster_idx: 2...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 2...
    [Query] Total server query time for this query: 50.95 seconds.
    [Query] Preparing PIR for cluster_idx: 8...
    [Query] Finish preparing PIR for cluster_idx: 8...
    [Query] Server start query for cluster_idx: 8...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 8...
    [Query] Total server query time for this query: 50.95 seconds.
    [Query] Preparing PIR for cluster_idx: 4...
    [Query] Finish preparing PIR for cluster_idx: 4...
    [Query] Server start query for cluster_idx: 4...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 4...
    [Query] Total server query time for this query: 50.94 seconds.
    [Query] Preparing PIR for cluster_idx: 1...
    [Query] Finish preparing PIR for cluster_idx: 1...
    [Query] Server start query for cluster_idx: 1...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 1...
    [Query] Total server query time for this query: 50.96 seconds.
    [Query] Preparing PIR for cluster_idx: 8...
    [Query] Finish preparing PIR for cluster_idx: 8...
    [Query] Server start query for cluster_idx: 8...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 8...
    [Query] Total server query time for this query: 50.94 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1179...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 50.94 seconds.

--- Running for documents with average size: ~4500 tokens ---
  -> Screening for 100 docs with avg. byte size around 4500 bytes...
  -> Prepared 100 docs with actual avg. size: 3809.48 .
Preparing 10 evaluation queries...
  -> Evaluation data prepared.
  -> Starting server setup (K-means)...
  -> server setup finished in 0.01 seconds.
  -> Starting client setup (generating Paillier keys)...
  -> Client setup finished in 0.07 seconds.
  -> Starting query loop...
    [Query] Preparing PIR for cluster_idx: 6...
    [Query] Finish preparing PIR for cluster_idx: 6...
    [Query] Server start query for cluster_idx: 6...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 6...
    [Query] Total server query time for this query: 50.23 seconds.
    [Query] Preparing PIR for cluster_idx: 8...
    [Query] Finish preparing PIR for cluster_idx: 8...
    [Query] Server start query for cluster_idx: 8...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 8...
    [Query] Total server query time for this query: 50.23 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 50.25 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 50.34 seconds.
    [Query] Preparing PIR for cluster_idx: 5...
    [Query] Finish preparing PIR for cluster_idx: 5...
    [Query] Server start query for cluster_idx: 5...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 5...
    [Query] Total server query time for this query: 50.22 seconds.
    [Query] Preparing PIR for cluster_idx: 8...
    [Query] Finish preparing PIR for cluster_idx: 8...
    [Query] Server start query for cluster_idx: 8...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 8...
    [Query] Total server query time for this query: 50.33 seconds.
    [Query] Preparing PIR for cluster_idx: 7...
    [Query] Finish preparing PIR for cluster_idx: 7...
    [Query] Server start query for cluster_idx: 7...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 7...
    [Query] Total server query time for this query: 50.24 seconds.
    [Query] Preparing PIR for cluster_idx: 6...
    [Query] Finish preparing PIR for cluster_idx: 6...
    [Query] Server start query for cluster_idx: 6...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 6...
    [Query] Total server query time for this query: 50.23 seconds.
    [Query] Preparing PIR for cluster_idx: 0...
    [Query] Finish preparing PIR for cluster_idx: 0...
    [Query] Server start query for cluster_idx: 0...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 0...
    [Query] Total server query time for this query: 50.24 seconds.
    [Query] Preparing PIR for cluster_idx: 1...
    [Query] Finish preparing PIR for cluster_idx: 1...
    [Query] Server start query for cluster_idx: 1...
    [Query] HE operations PIR ...
    [Query]  Max chunks 1002...
    [Query] Server finish query for cluster_idx: 1...
    [Query] Total server query time for this query: 50.23 seconds.


--- FINAL EXPERIMENT RESULTS ---
   n_docs  n_clusters  key_length  top_n_clusters  server_setup_s  client_setup_s  avg_query_latency_s  avg_upload_kb  avg_download_kb  recall_at_10  avg_query_gen_s  avg_server_comm_s  avg_decode_s
0     100          10        1024               1        0.045662        0.095627            30.410778       2.929688       122.447266           1.0         0.125110          22.888343      6.698430
1     100          10        1024               1        0.006629        0.092467            49.006239       2.929297       217.076953           1.0         0.123790          35.754349     11.891518
2     100          10        1024               1        0.007169        0.091321            71.202881       2.929297       345.366016           1.0         0.125202          50.950887     19.162280
3     100          10        1024               1        0.007154        0.074060            67.360759       2.928516       293.493750           1.0         0.122844          50.253584     15.958165

Results saved to pir_rag_final_results_20250714-000246.csv
Job finished at Mon Jul 14 00:02:47 CDT 2025
